# Instagram投稿AI アシスタント MVP要件定義書

## 1. プロジェクト概要

### 目的
Instagramの投稿文を画像から自動生成し、予約投稿やハッシュタグ最適化を行うAIツールの開発

### ターゲットユーザー
- 小規模事業者、個人事業主
- インフルエンサー、コンテンツクリエイター
- SNS運用担当者

## 2. 主要機能

### 2.1 AI投稿文生成
- 画像解析による自動文章生成（Dify API活用）
- 業種別テンプレート提供
- トーン調整（カジュアル/フォーマル）
- 絵文字自動挿入

### 2.2 ハッシュタグ最適化
- 関連ハッシュタグ自動提案
- トレンド分析
- 競合分析機能
- 適切なハッシュタグ数の推奨（10-15個）

### 2.3 投稿管理
- 予約投稿機能（カレンダービュー）
- 複数アカウント管理
- 下書き保存
- 投稿履歴表示

### 2.4 分析・レポート
- エンゲージメント率の可視化
- 最適投稿時間の提案
- フォロワー増減のトラッキング
- 人気投稿の分析

## 3. 技術スタック

### フロントエンド
- Next.js 15.5.4 (App Router)
- TypeScript
- Tailwind CSS
- React Hook Form + Zod（フォームバリデーション）
- Lucide React（アイコン）

### バックエンド
- Supabase（認証、データベース、ストレージ）
- Dify API（AI文章生成）
- Instagram Graph API（投稿、分析）

## 4. MVP範囲

### Phase 1（必須）
- ✅ ユーザー認証（ログイン/サインアップ）
- ✅ 画像アップロードと投稿文生成
- ✅ 基本的なハッシュタグ提案
- ✅ 即座投稿機能

### Phase 2（優先）
- ✅ 予約投稿機能
- ✅ 投稿カレンダー
- ✅ 簡単な分析ダッシュボード
- ✅ 複数画像対応（カルーセル）

### Phase 3（可能なら）
- ✅ 複数アカウント対応
- ✅ 高度な分析機能
- ✅ 競合分析
- チーム機能

## 5. UI/UX要件

### デザイン原則
- モバイルファースト
- 直感的な操作性
- Instagram風のビジュアルデザイン
- ダークモード対応（Phase 2）

### 主要画面
- ✅ ダッシュボード
- ✅ 投稿作成画面
- ✅ カレンダービュー
- ✅ 分析画面
- ✅ 設定画面

## 6. セキュリティ要件
- Instagram認証方式：
  - 現在：APIキー手動入力方式（実装済み）
  - 将来：OAuth 2.0認証（Metaアプリレビュー審査通過後）
- APIキーの安全な管理
- HTTPS通信
- レート制限の実装

## 7. パフォーマンス要件
- 画像アップロード：最大10MB
- AI生成時間：5秒以内
- ページロード：3秒以内
- 同時接続数：100ユーザー（MVP時点）

## 8. 画面定義

### 8.1 認証関連画面
- **ログイン画面** (/login)
  - メールアドレス/パスワード入力
  - ソーシャルログイン（Google, Instagram）
  - パスワードリセットリンク

- **サインアップ画面** (/signup)
  - アカウント情報入力
  - 利用規約同意
  - メール認証

- **パスワードリセット画面** (/forgot-password)
  - メールアドレス入力
  - リセットメール送信

### 8.2 メイン機能画面
- **ダッシュボード** (/dashboard)
  - 本日の予約投稿
  - 直近のパフォーマンス
  - クイックアクション
  - 統合された投稿カレンダー（月次ビュー）
  - 投稿ステータス凡例表示

- **投稿作成画面** (/posts/create)
  - 投稿タイプ選択（単一画像/カルーセル）
  - 画像アップロードUI（クリックで遷移）
  - ※プロトタイプ版：実際のアップロード機能なし、クリックでサンプル画像使用
  - ※本番版で実装予定：実際の画像アップロード機能

- **AI分析・生成画面** (/posts/create/generate)
  - 画像プレビュー（カルーセル表示）
  - AI投稿文生成（3パターン提案）
  - 投稿文編集機能
  - 推奨投稿時間（エンゲージメント予測付き）
  - ハッシュタグ提案（カテゴリ別、関連度表示）
  - 予測パフォーマンス表示
  - 再生成機能

- **投稿最終確認画面** (/posts/create/confirm)
  - Instagram風投稿プレビュー
  - 投稿内容の最終編集
  - 投稿タイミング選択：
    - 今すぐ投稿
    - AI推奨時間に予約投稿（エンゲージメント予測表示）
    - 手動で時間指定
  - 投稿オプション：
    - 位置情報追加（チェック時に入力フィールド表示）
    - ユーザータグ付け（チェック時に入力フィールド表示）
    - Facebook同時投稿
  - 下書き保存機能

- **投稿管理画面** (/posts)
  - 投稿一覧（グリッド/リスト表示）
  - ステータス別フィルター
  - 一括操作機能
  - クリックで詳細画面へ遷移

- **投稿詳細画面** (/posts/[id])
  - Instagram風プレビュー
  - 投稿情報表示（日時、位置情報、ハッシュタグ）
  - エンゲージメント表示（公開済みの場合）
  - 編集・削除機能

### 8.3 分析画面

- **分析ダッシュボード** (/analytics)
  - 主要KPI表示
  - グラフ・チャート
  - レポートダウンロード

### 8.4 設定画面
- **アカウント設定** (/settings)
  - プロフィール編集
  - Instagram連携（APIキー入力方式）
    - アクセストークン入力
    - ビジネスアカウントID入力
    - 接続テスト機能
    - 設定マニュアルリンク

- **AI設定** (/ai-settings)
  - 業種選択
  - トーン設定
  - NGワード設定
  - ターゲット層設定
  - 文章の長さ設定
  - カスタムプロンプト（上級者向け）

### 8.5 その他
- **オンボーディング** (/onboarding)
  - 初期設定ウィザード
  - Instagram連携
  - AI設定

## 9. 追加要件

### 9.1 料金プラン
- **無料プラン**
  - 月10投稿まで
  - 基本AI機能
  - 1アカウント

- **スタータープラン** (¥2,980/月)
  - 月100投稿
  - 高度なAI機能
  - 3アカウントまで
  - 分析機能

- **プロフェッショナル** (¥9,980/月)
  - 無制限投稿
  - 全機能利用可能
  - 10アカウントまで
  - APIアクセス

### 9.2 権限管理
- **管理者権限**
  - 全機能アクセス
  - チームメンバー管理
  - 請求情報管理

- **編集者権限**
  - 投稿作成・編集
  - 分析閲覧

- **閲覧者権限**
  - 投稿・分析の閲覧のみ

### 9.3 通知機能
- **アプリ内通知**
  - 投稿完了通知
  - エラー通知
  - パフォーマンスアラート

- **メール通知**
  - 週次レポート
  - 重要なアラート
  - システムメンテナンス

### 9.4 バックアップ・復元
- 自動バックアップ（日次）
- 投稿履歴のエクスポート
- 削除済み投稿の復元（30日間）

### 9.5 API仕様
- RESTful API設計
- レート制限（1000リクエスト/時）
- Webhook対応
- APIドキュメント自動生成

### 9.6 多言語対応（Phase 3）
- 日本語（デフォルト）
- 英語
- 中国語（簡体字）

### 9.7 アクセシビリティ
- WCAG 2.1 Level AA準拠
- キーボードナビゲーション
- スクリーンリーダー対応

### 9.8 モバイルアプリ（将来）
- React Native
- iOS/Android対応
- プッシュ通知

### 9.9 インテグレーション
- Slack連携
- Google Analytics連携
- Zapier対応
- Webhook API

### 9.10 Instagram連携方式
- **現在の実装（Phase 1）**
  - APIキー手動入力方式
  - アクセストークン入力
  - ビジネスアカウントID入力
  - 設定マニュアル完備

- **将来の実装（Phase 2）**
  - OAuth 2.0認証
  - ワンクリックでInstagram連携
  - 自動トークン更新
  - 要件：Metaアプリレビュー審査通過

## 10. 開発進捗

### 完了済み
- ✅ プロジェクトセットアップ（Next.js, TypeScript, Tailwind CSS）
- ✅ 認証画面実装（ログイン、サインアップ、パスワードリセット）
- ✅ オンボーディングフロー実装
- ✅ ダッシュボード画面実装（投稿カレンダー統合版）
- ✅ 投稿作成フロー実装（3画面構成・プロトタイプ版）
  - 投稿作成画面（画像選択UIあり、クリックで遷移）
  - AI分析・生成画面（3パターン提案）
  - 最終確認画面（AI推奨/手動予約選択、位置情報・タグ付け機能）
- ✅ Supabase設定（デモモード）
- ✅ サイドバーナビゲーション実装（最適化・統一済み）
- ✅ 投稿管理画面実装（詳細画面へのナビゲーション付き）
- ✅ 投稿詳細画面実装
- ✅ 投稿カレンダー機能実装（ダッシュボードに統合）
- ✅ 分析・レポート画面実装
- ✅ AI設定画面実装（基本設定・カスタムプロンプト）
- ✅ 設定画面実装（マルチタブ対応）

### 開発中
- なし

### 未着手
- 実際の画像アップロード機能（現在はモックデータ）
- Dify API統合
- Instagram Graph API統合（実際の投稿機能）
- OAuth認証実装（Metaアプリレビュー審査待ち）
- 実際のデータベース接続
- 予約投稿の自動実行
- メール通知機能
- 料金プラン実装
- チーム機能