# 📖 Instagram API設定マニュアル

このマニュアルでは、Instagram Graph APIのアクセストークンを取得し、本アプリケーションと連携する方法を**初心者の方でもわかりやすく**説明します。

## 🎯 このマニュアルでできること

Instagram投稿AIアシスタントを使うために必要な以下の情報を取得できます：
- **アクセストークン**（APIを使うための認証キー）
- **ビジネスアカウントID**（あなたのInstagramアカウントの識別番号）

---

## 📋 事前準備チェックリスト

始める前に、以下の準備ができているか確認しましょう：

### ✅ 必要なアカウント

1. **Instagramアカウント**
   - ✅ ビジネスアカウントまたはクリエイターアカウントである
   - ❌ 個人アカウントの場合は、設定から切り替えが必要です

2. **Facebookページ**
   - ✅ Facebookページを持っている
   - ✅ InstagramアカウントとFacebookページが連携済み

3. **Facebook開発者アカウント**
   - ✅ Meta for Developersにログインできる
   - まだの場合は[こちら](https://developers.facebook.com/)から登録

---

## 🚀 ステップ1: Instagramをビジネスアカウントに切り替える

> **既にビジネスアカウントの方はスキップしてください**

### 📱 スマートフォンでの設定方法

1. Instagramアプリを開く
2. プロフィール画面右上の「≡」メニューをタップ
3. 「設定とプライバシー」をタップ
4. 「アカウントの種類とツール」をタップ
5. 「プロアカウントに切り替える」をタップ
6. カテゴリを選択（あなたのビジネスに合うものを選択）
7. 「ビジネス」を選択
8. 連絡先情報を入力して完了！

---

## 🔗 ステップ2: FacebookページとInstagramを連携

### 📱 スマートフォンでの設定方法

1. Facebookアプリを開く
2. メニューから「ページ」を選択
3. あなたのページを選択
4. 「設定」→「Instagram」を選択
5. 「アカウントをリンク」をタップ
6. Instagramにログインして連携完了！

---

## 🔧 ステップ3: Meta for Developersでアプリを作成

### 1️⃣ Meta for Developersにアクセス

1. [Meta for Developers](https://developers.facebook.com/)にアクセス
2. 右上の「ログイン」ボタンをクリック
3. Facebookアカウントでログイン

### 2️⃣ 新しいアプリを作成

1. ダッシュボードで「**アプリを作成**」ボタンをクリック

   ![アプリ作成ボタン](https://via.placeholder.com/600x200?text=アプリを作成ボタンの位置)

2. **「ビジネス」**タイプを選択して「次へ」

3. アプリ情報を入力：
   - **アプリ名**: `Instagram投稿アシスタント`（任意の名前でOK）
   - **アプリの連絡先メールアドレス**: あなたのメールアドレス
   - **ビジネスアカウント**: （選択可能な場合は選択）

4. 「アプリを作成」をクリック

### 3️⃣ Instagram Graph APIを追加

1. アプリダッシュボードの左メニューから「**プロダクトを追加**」をクリック

2. 「**Instagram Graph API**」を見つけて「**設定**」ボタンをクリック

3. 「**開始する**」をクリック

---

## 🔑 ステップ4: アクセストークンを取得

### 1️⃣ Graph API エクスプローラーを開く

1. 左メニューから「**ツール**」→「**Graph API エクスプローラー**」を選択

   ![Graph API エクスプローラー](https://via.placeholder.com/600x300?text=Graph+API+エクスプローラーの画面)

### 2️⃣ アプリとユーザーを選択

1. **Meta App**のドロップダウンから、先ほど作成したアプリを選択

2. **User or Page**のドロップダウンから「**Get User Access Token**」を選択

### 3️⃣ 必要な権限を選択

以下の権限にチェックを入れます：

#### 📝 必須の権限
- ✅ `instagram_basic`
- ✅ `instagram_content_publish`
- ✅ `pages_show_list`
- ✅ `pages_read_engagement`
- ✅ `business_management`

#### 📊 分析機能を使う場合（オプション）
- ✅ `instagram_manage_insights`
- ✅ `read_insights`

### 4️⃣ アクセストークンを生成

1. 「**Generate Access Token**」ボタンをクリック

2. Facebookのログイン画面が表示されたら、ログインして権限を許可

3. 生成された**アクセストークン**が表示されます
   ```
   EAABwzLixnjYBOZDZD... （長い文字列）
   ```

   ⚠️ **重要**: このトークンを**コピーして安全な場所に保存**してください！

---

## 🆔 ステップ5: ビジネスアカウントIDを取得

### Graph API エクスプローラーで取得

1. Graph API エクスプローラーの入力欄に以下を入力：
   ```
   me/accounts
   ```

2. 「**Submit**」ボタンをクリック

3. 結果からあなたのFacebookページの`id`をメモします
   ```json
   {
     "data": [
       {
         "id": "123456789", ← これをメモ
         "name": "あなたのページ名"
       }
     ]
   }
   ```

4. 次に、入力欄に以下を入力（`PAGE_ID`は上でメモしたIDに置き換え）：
   ```
   PAGE_ID?fields=instagram_business_account
   ```

5. 「**Submit**」をクリック

6. 結果から`instagram_business_account`の`id`をメモします
   ```json
   {
     "instagram_business_account": {
       "id": "17841444355555555" ← これがビジネスアカウントID
     }
   }
   ```

---

## ⚙️ ステップ6: アプリに設定を入力

### 設定画面での入力

1. Instagram投稿AIアシスタントの「**設定**」画面を開く

2. 「**Instagram連携**」タブを選択

3. 以下の情報を入力：
   - **アクセストークン**: `EAABwzLixnjYBOZDZD...`（ステップ4で取得）
   - **ビジネスアカウントID**: `17841444355555555`（ステップ5で取得）

4. 「**接続テスト**」ボタンをクリックして接続を確認

5. 「**設定を保存**」をクリックして完了！

---

## ⚠️ 重要な注意事項

### 🔄 トークンの有効期限

- アクセストークンは**60日で有効期限が切れます**
- 期限が近づいたら再度取得が必要です
- アプリから通知が来たら、このマニュアルのステップ4から再実行してください

### 🔒 セキュリティ

- アクセストークンは**パスワードと同じくらい重要**です
- 他人と共有しない
- 公開しない（GitHubなどにアップロードしない）
- 安全な場所に保管する

### 📝 トークンの保管方法

以下のような安全な場所に保管することをお勧めします：
- パスワードマネージャー（1Password、Bitwardenなど）
- 暗号化されたメモアプリ
- ローカルの安全なファイル

---

## 🆘 トラブルシューティング

### ❌ エラー: 「Invalid OAuth access token」

**原因**: トークンが無効または期限切れ
**解決策**: ステップ4からやり直してトークンを再取得

### ❌ エラー: 「Permissions error」

**原因**: 必要な権限が不足している
**解決策**: ステップ4-3で必要な権限をすべて選択しているか確認

### ❌ Instagramアカウントが表示されない

**原因**: FacebookページとInstagramが連携されていない
**解決策**: ステップ2を確認して連携を完了させる

### ❌ ビジネスアカウントIDが取得できない

**原因**: Instagramが個人アカウントのまま
**解決策**: ステップ1でビジネスアカウントに切り替える

---

## 📞 サポート

設定でお困りの場合は、以下の情報と一緒にサポートまでお問い合わせください：

1. エラーメッセージの内容（スクリーンショット）
2. どのステップで問題が発生したか
3. 試した解決策

**サポートメール**: support@example.com

---

## 🎉 設定完了！

おめでとうございます！これでInstagram投稿AIアシスタントを使う準備が整いました。

### 次のステップ

1. **AI設定**から、あなたのビジネスに合った設定を行いましょう
2. **新規投稿作成**から、最初の投稿を作成してみましょう
3. **投稿カレンダー**で、計画的な投稿スケジュールを立てましょう

素敵なInstagram運用を！ 🚀